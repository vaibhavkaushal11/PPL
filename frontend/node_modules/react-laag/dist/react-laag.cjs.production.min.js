"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-dom");function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function u(t){var r=e.useRef(null);return function(e){e&&e!==r.current&&(r.current=e,t(e))}}require("tiny-warning");var a="undefined"!=typeof window?e.useLayoutEffect:e.useEffect,c={top:0,left:0,right:1,bottom:1,width:1,height:1};function l(e){return parseFloat(e.replace("px",""))}function f(e,t,r){return e<t?t:e>r?r:e}function p(e){return null!=e}function d(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r,n=s(t);!(r=n()).done;){var o=r.value;o&&("function"==typeof o?o(e):o.current=e)}}}function h(e){return"react-laag: Could not find a valid reference for the "+e+" element. There might be 2 causes:\n   - Make sure that the 'ref' is set correctly on the "+e+' element when isOpen: true. Also make sure your component forwards the ref with "forwardRef()".\n   - Make sure that you are actually rendering the '+e+" when the isOpen prop is set to true"}var g=e.createContext({});function v(t){var r=t.children,n=t.registrations,o=e.useCallback((function(e){return n.current.add(e),function(){return n.current.delete(e)}}),[n]);return e.createElement(g.Provider,{value:o},r)}var m=["bottom-start","bottom-end","bottom-center","top-start","top-center","top-end","left-end","left-center","left-start","right-end","right-center","right-start","center"],y={top:"bottom",left:"right",bottom:"top",right:"left",center:"center"},b=function(){function e(e,t,r,n,o,i,s,u,a){this.prop=e,this.opposite=t,this.isHorizontal=r,this.sizeProp=n,this.oppositeSizeProp=o,this.cssProp=i,this.oppositeCssProp=s,this.isCenter=u,this.isPush=a}var t=e.prototype;return t.factor=function(e){return e*(this.isPush?1:-1)},t.isOppositeDirection=function(e){return this.isHorizontal!==e.isHorizontal},e}();function w(e,t){void 0===t&&(t=!0);var r=["left","right"].includes(e);return new b(e,t?w(y[e],!1):null,r,r?"width":"height",r?"height":"width",r?"left":"top",r?"top":"left","center"===e,!["right","bottom"].includes(e))}var C={top:w("top"),bottom:w("bottom"),left:w("left"),right:w("right")},O=o({},C,{center:w("center")}),S=["top","left","bottom","right"],E=function(){function e(e){return Object.assign(this,e)}return e.mergeSmallestSides=function(t){var r=t[0],n=t.slice(1);if(!r)throw new Error("Please provide at least 1 bounds objects in order to merge");for(var o,i=Object.fromEntries(S.map((function(e){return[e,r[e]]}))),u=s(n);!(o=u()).done;)for(var a,c=o.value,l=s(S);!(a=l()).done;){var f=a.value;i[f]=Math.min(i[f],c[f])}return new e(i)},n(e,[{key:"allSidesArePositive",get:function(){var e=this;return S.every((function(t){return e[t]>=0}))}},{key:"negativeSides",get:function(){var e=this;return Object.fromEntries(S.filter((function(t){return e[t]<0})).map((function(t){return[t,e[t]]})))}}]),e}();function P(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e+(t?l(t):0)}),0)}function L(e){return{top:e.top,left:e.left,right:e.right,bottom:e.bottom,width:e.width,height:e.height}}var B={top:0,left:0,right:0,bottom:0,width:0,height:0},j=function(){function e(e){return void 0===e&&(e={}),Object.assign(this,B,e)}e.create=function(t){return new e(t)},e.fromElement=function(t,r){void 0===r&&(r={});var n=r.withTransform,i=void 0===n||n,s=r.environment,u=void 0===s?window:s,a=r.withScrollbars,c=void 0===a||a,f=new e(L(t.getBoundingClientRect()));if(!i){var p=u.getComputedStyle(t),d=p.width,h=p.height,g=p.boxSizing,v=p.borderLeft,m=p.borderRight,y=p.borderTop,b=p.borderBottom,w=p.paddingLeft,C=p.paddingRight,O=p.paddingTop,S=p.paddingBottom;f=new e(o({},f,{width:"border-box"===g?l(d):P(d,v,m,w,C),height:"border-box"===g?l(h):P(h,y,b,O,S)}))}return c?f:f.substract({right:f.width-t.clientWidth,bottom:f.height-t.clientHeight})},e.empty=function(){return new e},e.fromWindow=function(t){var r=t||{},n=r.innerWidth,o=void 0===n?0:n,i=r.innerHeight,s=void 0===i?0:i;return new e({width:o,height:s,right:o,bottom:s})};var t=e.prototype;return t.toObject=function(){return L(this)},t.merge=function(t){var r=this.toObject();return new e(o({},r,"function"==typeof t?t(r):t))},t.substract=function(t){for(var r=this.toObject(),n=0,o=Object.entries(t);n<o.length;n++){var i=o[n],s=i[0],u=i[1];if(s in C){var a=C[s];r[s]+=a.factor(u),r[a.isHorizontal?"width":"height"]-=u}else r[s]-=u||0}return new e(r)},t.offsetsTo=function(e){return new E({top:e.top-this.top,bottom:this.bottom-e.bottom,left:e.left-this.left,right:this.right-e.right})},t.mapSides=function(t){for(var r=this.toObject(),n=0,o=Object.values(C);n<o.length;n++){var i=o[n];r[i.prop]=t(i,r[i.prop])}return new e(r)},n(e,[{key:"surface",get:function(){return this.width*this.height}}]),e}(),T=function(){function e(e,t,r,n,o){this.primary=e,this.secondary=t,this.offsets=o,this._cachedLayerBounds=null,this._cachedContainerOffsets=null,this.setSubjectsBounds(r,n)}var t=e.prototype;return t.setSubjectsBounds=function(e,t){if(t){var r="function"==typeof t?t(this.primary.prop):t;this.subjectsBounds=e.merge({layer:o({},e.layer,r)})}else this.subjectsBounds=e},t.getLayerBounds=function(e){if(void 0===e&&(e=0),this._cachedLayerBounds&&0===e)return this._cachedLayerBounds;var t=this.primary,r=this.secondary,n=this.subjectsBounds,o=n.trigger,i=n.layer,s=n.arrow,u=t.isHorizontal,a=t.oppositeCssProp,c=t.oppositeSizeProp,l=t.prop,p=t.opposite,d=j.empty();d[p.prop]=o[l]-t.factor(this.offsets.trigger),d[l]=d[p.prop]-t.factor(i[t.sizeProp]);var h=2*this.offsets.arrow,g=o[a]-(i[c]-s[c])+h,v=o[a]+(o[c]-s[c])-h;if(r.isPush||(g+=i[c],v+=i[c]),r.isCenter){var m=(u?C.top:C.left).prop,y=(u?C.bottom:C.right).prop;d[m]=f(o[m]+o[c]/2-i[c]/2+e,g,v),d[y]=d[m]+i[c]}else{var b=r,w=o[b.prop];d[b.prop]=f(w+e+(w<g?g-w:w>v?v-w:0),g,v),d[b.opposite.prop]=d[b.prop]+r.factor(i[c])}d.width=d.right-d.left,d.height=d.bottom-d.top;var O=j.create(d);return 0===e&&(this._cachedLayerBounds=O),O},t.getLayerCollisionBounds=function(){var e=this.offsets.container;return this.getLayerBounds().mapSides((function(t,r){return r-t.factor(e)})).merge((function(t){return{width:t.width+2*e,height:t.height+2*e}}))},t.getContainerOffsets=function(e){if(this._cachedContainerOffsets&&!e)return this._cachedContainerOffsets;var t=this.subjectsBounds.merge({layer:e||this.getLayerCollisionBounds()}),r=E.mergeSmallestSides(t.layerOffsetsToScrollContainers);return e||(this._cachedContainerOffsets=r),r},n(e,[{key:"type",get:function(){return this.primary.prop+"-"+("center"===this.secondary.prop?"center":["bottom","right"].includes(this.secondary.prop)?"end":"start")}},{key:"triggerIsBigger",get:function(){var e=this.secondary.isHorizontal,t=this.subjectsBounds;return e&&t.triggerHasBiggerWidth||!e&&t.triggerHasBiggerHeight}},{key:"fitsContainer",get:function(){return this.getContainerOffsets().allSidesArePositive}},{key:"visibleSurface",get:function(){var e=this.getLayerBounds(),t=this.getContainerOffsets(e).negativeSides;for(var r in t)t[r]=-t[r];return e.substract(t).surface}},{key:"secondaryOffsetSide",get:function(){var e,t,r=this,n=this.getContainerOffsets();return(null!=(e=null==(t=Object.entries(n.negativeSides).map((function(e){return[C[e[0]],e[1]]})).filter((function(e){return r.primary.isOppositeDirection(e[0])})).sort((function(e,t){return t[1]-e[1]})))?void 0:t[0])?e:[])[0]||null}}]),e}(),k=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.getLayerBounds=function(){var e=this.subjectsBounds,t=e.trigger,r=e.layer,n=j.empty();return n.top=t.top+t.height/2-r.height/2,n.bottom=n.top+r.height,n.left=t.left+t.width/2-r.width/2,n.right=n.left+r.width,n.width=n.right-n.left,n.height=n.bottom-n.top,n},n}(T),R={position:"absolute",willChange:"top, left",left:null,right:null,top:null,bottom:null},H=function(){function e(e,t,r){this.placements=e,this.config=t,this.subjectsBounds=r}e.getSidesFromPlacementType=function(e){var t=e.split("-"),r=t[1],n=C[t[0]];return[n,"center"===r?O.center:n.isHorizontal?"start"===r?O.top:O.bottom:"start"===r?O.left:O.right]},e.create=function(t,r){var n={arrow:r.arrowOffset,container:r.containerOffset,trigger:r.triggerOffset};function o(o){void 0===o&&(o=r.placement);var i=e.getSidesFromPlacementType(o),s=i[0],u=i[1],a=C[s.isHorizontal?r.preferY:r.preferX],c=!s.isHorizontal&&t.triggerHasBiggerWidth||s.isHorizontal&&t.triggerHasBiggerHeight;function l(e,o){return new T(e,o,t,r.layerDimensions,n)}var f=[];return f[0]=l(s,u),f[1]=l(s,u.isCenter?a:O.center),f[2]=l(s,O[(u.opposite.isCenter?a.opposite:u.opposite).prop]),f[3]=l(a,c?s:O[s.opposite.prop]),f[4]=l(a,O.center),f[5]=l(a,c?O[s.opposite.prop]:s),f[6]=l(C[a.opposite.prop],c?s:O[s.opposite.prop]),f[7]=l(C[a.opposite.prop],O.center),f[8]=l(C[a.opposite.prop],c?O[s.opposite.prop]:s),f[9]=l(C[s.opposite.prop],u),f[10]=l(C[s.opposite.prop],u.isCenter?a:O.center),f[11]=l(C[s.opposite.prop],O[(u.opposite.isCenter?a.opposite:u.opposite).prop]),f.filter((function(e){return e.type===r.placement||r.possiblePlacements.includes(e.type)}))}return new e("center"===r.placement?[new k(O.center,O.center,t,r.layerDimensions,n)].concat(o(r.preferY+"-"+r.preferX)):o(),r,t)};var t=e.prototype;return t.filterPlacementsBySide=function(e){return this.placements.filter((function(t){return t.primary===e}))},t.findFirstPlacementThatFits=function(){return this.placements.find((function(e){return e.fitsContainer}))},t.placementWithBiggestVisibleSurface=function(){return this.placements.map((function(e){return{placement:e,surface:e.visibleSurface}})).sort((function(e,t){return t.surface-e.surface}))[0].placement},t.findSuitablePlacement=function(){return this.config.auto?this.findFirstPlacementThatFits()||this.placementWithBiggestVisibleSurface():this.placements[0]},t.getSecondaryOffset=function(e){var t=this.config;if(!t.auto||t.snap||e instanceof k)return 0;var r=this.filterPlacementsBySide(e.primary);if(0===r.indexOf(e)&&e.fitsContainer)return 0;var n=r.find((function(e){return!e.fitsContainer}));if(!n)return 0;var o=n.secondaryOffsetSide;if(!o)return 0;var i,s=e.getContainerOffsets(),u=e.secondary;return i=e.triggerIsBigger||n===e?o.isPush?-1:1:u===O.left||[O.top,O.center].includes(u)&&o.isPush?-1:1,s[o.prop]*i},t.getStyles=function(e,t,r,n){return{arrow:function(e,t,r){var n;if(t.primary.isCenter)return R;var i=e.layer,s=e.trigger,u=e.arrow,a=t.primary.oppositeSizeProp,c=s[a]>i[a],l=r+u[a]/2,p=i[a]-u[a]/2-r,d=function(e,t,r){var n=e.layer,o=e.trigger,i=e.arrow,s=t.primary.oppositeSizeProp,u=t.primary.isHorizontal?["top","bottom"]:["left","right"],a=u[0],c=u[1],l=n[a]+n[s]/2-o[a]-i[s]/2-r,f=n[c]-n[s]/2-o[c]+i[s]/2+r;return(l<0?-l:0)+(f>0?-f:0)}(e,t,r),h=t.primary.oppositeCssProp,g=c?i[a]/2+d:s[h]+s[a]/2-i[h];return o({},R,((n={})[t.primary.prop]="100%",n[h]=f(g,l,p),n))}(this.subjectsBounds.merge({layer:e}),t,this.config.arrowOffset),layer:o({},{willChange:"top, left, width, height"},this.config.overflowContainer?{position:"fixed",top:e.top,left:e.left}:{position:"absolute",top:e.top-this.subjectsBounds.parent.top+r.top-n.top,left:e.left-this.subjectsBounds.parent.left+r.left-n.left})}},t.getHasDisappeared=function(e){var t=this.config.overflowContainer?this.subjectsBounds.trigger:e,r=E.mergeSmallestSides(this.subjectsBounds.offsetsToScrollContainers(t,!0));return Object.entries(r.negativeSides).some((function(e){return e[1]<=-t[C[e[0]].sizeProp]}))?"full":r.allSidesArePositive?null:"partial"},t.result=function(e,t){var r=this.findSuitablePlacement(),n=this.getSecondaryOffset(r),o=r.getLayerBounds(n);return{styles:this.getStyles(o,r,e,t),layerSide:r.primary.prop,placement:r,layerBounds:o,hasDisappeared:this.getHasDisappeared(o)}},e}(),x=function(){function e(e,t){this.overflowContainer=t,Object.assign(this,e)}e.create=function(t,r,n,o,i,s,u,a){var c=j.fromWindow(t);return new e({layer:j.fromElement(r,{environment:t,withTransform:!1}),trigger:a?j.create(L(a())):j.fromElement(n),arrow:i?j.fromElement(i):j.empty(),parent:o?j.fromElement(o):c,window:c,scrollContainers:[c].concat(s.map((function(e){return j.fromElement(e,{withScrollbars:!1})})))},u)};var t=e.prototype;return t.merge=function(t){return new e(o({},this,t),this.overflowContainer)},t.offsetsToScrollContainers=function(e,t){return void 0===t&&(t=!1),(this.overflowContainer&&!t?[this.window]:this.scrollContainers).map((function(t){return t.offsetsTo(e)}))},n(e,[{key:"layerOffsetsToScrollContainers",get:function(){return this.offsetsToScrollContainers(this.layer)}},{key:"triggerHasBiggerWidth",get:function(){return this.trigger.width>this.layer.width}},{key:"triggerHasBiggerHeight",get:function(){return this.trigger.height>this.layer.height}}]),e}(),I=null,M={auto:!1,arrowOffset:0,containerOffset:10,triggerOffset:0,overflowContainer:!0,placement:"top-center",possiblePlacements:m,preferX:"right",preferY:"bottom",snap:!1,container:void 0,trigger:void 0};function z(e,t){return Math.tan(e*(Math.PI/180))*t}function A(e,t,r,n){var o;return((o={}).bottom="0 "+-n+" "+t+" "+e,o.top="0 0 "+t+" "+(e+n),o.right=-n+" 0 "+e+" "+t,o.left="0 0 "+(e+n)+" "+t,o)[r.prop]}function D(e,t,r,n,o){var i,s,u,a=n/10*e*2,c=(i={},i.bottom=[0,e],i.top=[0,0],i.right=[e,t],i.left=[0,t],i)[r.prop].join(" "),l=r.isHorizontal?"V 0":"H "+t,f=t/2,p=t/2+z(o,e/8),d=e/8,h=(s={},s.bottom=["C",p,d,f+a,0,f,0],s.top=["C",p,e-d,f+a,e,f,e],s.right=["C",d,t-p,0,f-a,0,f],s.left=["C",e-d,t-p,e,f-a,e,f],s)[r.prop].join(" "),g=t/2-z(o,e/8),v=e/8;return["M",c,l,h,(u={},u.bottom=["C",f-a,0,g,v,c],u.top=["C",f-a,e,g,e-v,c],u.right=["C",0,f+a,v,t-g,c],u.left=["C",e,f+a,e-v,t-g,c],u)[r.prop].join(" ")].join(" ")}function W(e,t,r,n,o){var i=z(o,r),s=n.isPush?[0,r]:[e,e-r],u=s[0],a=s[1];return n.isHorizontal?["M",u,r,"V",t-r,"L",a,t-r-i,"V",i+r,"Z"].join(" "):["M",r,u,"H",t-r,"L",t-r-i,a,"H",i+r,"Z"].join(" ")}var _,Y=e.forwardRef((function(t,r){var n=t.size,i=void 0===n?8:n,s=t.angle,u=void 0===s?45:s,a=t.borderWidth,c=void 0===a?0:a,l=t.borderColor,f=void 0===l?"black":l,p=t.roundness,d=void 0===p?0:p,h=t.backgroundColor,g=void 0===h?"white":h,v=t.layerSide,m=void 0===v?"top":v,y=t.style,b=void 0===y?{}:y,w=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||(o[r]=e[r]);return o}(t,["size","angle","borderWidth","borderColor","roundness","backgroundColor","layerSide","style"]);if("center"===m)return null;var O=C[m],S=i,E=2*z(u,i),P=Math.max(S,E);return e.createElement("svg",o({ref:r},w,{style:o({},b,{transform:"translate"+(O.isHorizontal?"Y":"X")+"(-50%)"}),width:P,height:P,preserveAspectRatio:O.isPush?"xMinYMin":"xMaxYMax",viewBox:A(S,E,O,c)}),e.createElement("path",{fill:g,strokeWidth:c,stroke:f,d:D(S,E,O,d,u)}),e.createElement("path",{fill:g,d:W(S,E,c,O,u)}))}));!function(e){e[e.ENTERING=0]="ENTERING",e[e.LEAVING=1]="LEAVING",e[e.IDLE=2]="IDLE"}(_||(_={})),exports.Arrow=Y,exports.DEFAULT_OPTIONS=M,exports.PLACEMENT_TYPES=m,exports.Transition=function(t){var r=t.isOpen,n=t.children,i=e.useState({isOpenInternal:r,isLeaving:!1}),s=i[0],u=i[1],a=e.useRef(!1);return e.useEffect((function(){r?u({isOpenInternal:!0,isLeaving:!1}):a.current&&u({isOpenInternal:!1,isLeaving:!0})}),[r,u]),e.useEffect((function(){a.current=!0}),[]),r||s.isOpenInternal||s.isLeaving?n(s.isOpenInternal,(function(){s.isOpenInternal||u((function(e){return o({},e,{isLeaving:!1})}))}),s.isLeaving):null},exports.mergeRefs=d,exports.setGlobalContainer=function(e){"undefined"!=typeof document&&(I="function"==typeof e?e():"string"==typeof e?document.getElementById(e):e)},exports.useHover=function(t){var r=void 0===t?{}:t,n=r.delayEnter,o=void 0===n?0:n,i=r.delayLeave,s=void 0===i?0:i,u=r.hideOnScroll,a=void 0===u||u,c=e.useState(!1),l=c[0],f=c[1],p=e.useRef(null),d=e.useRef(_.IDLE),h=e.useRef(!1),g=e.useCallback((function(){clearTimeout(p.current),p.current=null,d.current=_.IDLE}),[]);function v(e,t){if(d.current===_.ENTERING&&p.current&&g(),l){if(t)return f(!1),p.current=null,void(d.current=_.IDLE);d.current=_.LEAVING,p.current=setTimeout((function(){f(!1),p.current=null,d.current=_.IDLE}),s)}}return e.useEffect((function(){var e=p.current;function t(){l&&a&&(g(),f(!1))}function r(){l&&(g(),f(!1))}return window.addEventListener("scroll",t,!0),window.addEventListener("touchend",r,!0),function(){window.removeEventListener("scroll",t,!0),window.removeEventListener("touchend",r,!0),e&&clearTimeout(e)}}),[l,a,g]),[l,{onMouseEnter:function(){d.current===_.LEAVING&&p.current&&g(),l||(d.current=_.ENTERING,p.current=setTimeout((function(){f(!0),p.current=null,d.current=_.IDLE}),o))},onMouseLeave:v,onTouchStart:function(){h.current=!1},onTouchMove:function(){h.current=!0},onTouchEnd:function(){h.current||l||f(!0),h.current=!1}},function(){return v(0,!0)}]},exports.useLayer=function(r){var n,i=r.isOpen,c=void 0!==i&&i,f=r.overflowContainer,m=void 0===f?M.overflowContainer:f,y=r.environment,b=void 0===y?"undefined"!=typeof window?window:void 0:y,w=r.ResizeObserver,C=r.placement,O=void 0===C?M.placement:C,S=r.possiblePlacements,E=void 0===S?M.possiblePlacements:S,P=r.preferX,L=void 0===P?M.preferX:P,B=r.preferY,j=void 0===B?M.preferY:B,T=r.auto,k=void 0===T?M.auto:T,R=r.snap,z=void 0===R?M.snap:R,A=r.triggerOffset,D=void 0===A?M.triggerOffset:A,W=r.containerOffset,_=void 0===W?M.containerOffset:W,Y=r.arrowOffset,N=void 0===Y?M.arrowOffset:Y,F=r.container,X=void 0===F?M.container:F,G=r.layerDimensions,V=void 0===G?null:G,q=r.onDisappear,U=r.onOutsideClick,Z=r.onParentClose,$=r.trigger,J=e.useState((function(){return{layerSide:"center"===O?"center":H.getSidesFromPlacementType(O)[0].prop,styles:{layer:{position:m?"fixed":"absolute",top:0,left:0},arrow:{position:"absolute",top:0,left:0}}}})),K=J[0],Q=J[1],ee=e.useRef(null),te=function(t,r){var n=e.useRef(t);return r?(n.current=t,n):(n.current=null,n)}(K,c),re=e.useRef(null);e.useEffect((function(){return function(){re.current&&(cancelAnimationFrame(re.current),re.current=null)}}),[]);var ne=e.useCallback((function(e,t,r){var n=e.scrollContainers,o=x.create(b,e.layer,e.trigger,n[0],e.arrow,n,m,null==$?void 0:$.getBounds),i=H.create(o,{placement:O,possiblePlacements:E,auto:k,layerDimensions:V,arrowOffset:N,containerOffset:_,triggerOffset:D,preferX:L,preferY:j,snap:z,overflowContainer:m}).result(t,r),s=i.hasDisappeared,u={layerSide:i.layerSide,styles:i.styles};te.current&&!function(e,t){if(e.layerSide!==t.layerSide)return!0;for(var r=0,n=["position","top","left","right","bottom"];r<n.length;r++){var o=n[r];if(e.styles.layer[o]!==t.styles.layer[o]||e.styles.arrow[o]!==t.styles.arrow[o])return!0}return!1}(te.current,u)||(te.current=u,re.current&&cancelAnimationFrame(re.current),re.current=requestAnimationFrame((function(){Q(u),re.current=null}))),p(s)&&p(q)&&q(s)}),[N,k,_,b,V,q,m,O,E,L,j,z,D,te,$]),oe=function(t){var r=t.enabled,n=t.onChange,i=t.environment,c=t.overflowContainer,f=t.triggerOption,p=function(e,t){if(void 0!==e)return t||e.ResizeObserver}(i,t.ResizeObserverPolyfill);e.useEffect((function(){}),[p]);var d,g,v=e.useRef(null),m=Boolean(f),y=(d=e.useRef({scrollContainers:[],trigger:null,layer:null}),e.useMemo((function(){return[function(){return d.current},function(e){d.current="function"==typeof e?e(d.current):e}]}),[])),b=y[0],w=y[1],C=(g=e.useRef([]),e.useMemo((function(){return{hasEventSubscriptions:function(){return g.current.length>0},removeAllEventSubscriptions:function(){for(var e,t=s(g.current);!(e=t()).done;)(0,e.value)();g.current=[]},addEventSubscription:function(e){g.current.push(e)}}}),[])),O=C.hasEventSubscriptions,S=C.addEventSubscription,E=C.removeAllEventSubscriptions,P=e.useCallback((function(){var e,t=b(),r=t.layer,o=t.trigger,s=t.scrollContainers,u=s[0];if(!r)throw new Error(h("layer"));if(!o&&!m)throw new Error(h("trigger"));e=u?{top:u.scrollTop,left:u.scrollLeft}:{top:i.scrollY,left:i.scrollX};var a={left:0,top:0};if(u){var c=i.getComputedStyle(u),f=c.borderTopWidth;a={left:l(c.borderLeftWidth)||0,top:l(f)||0}}n({layer:r,trigger:o,scrollContainers:s,arrow:v.current},e,a)}),[b,n,i,v,m]),L=e.useCallback((function(){var e=b(),t=e.trigger,r=e.layer,n=e.scrollContainers;if(!r)throw new Error(h("layer"));if(!t&&!m)throw new Error(h("trigger"));if(p){for(var o=!1,u=new p((function(){o?P():o=!0})),a=0,c=[t,r,document.body];a<c.length;a++){var l=c[a];l&&u.observe(l)}S((function(){for(var e=0,n=[t,r,document.body];e<n.length;e++){var o=n[e];o&&u.unobserve(o)}u.disconnect()}))}for(var f,d=function(){var e=f.value;e.addEventListener("scroll",P),S((function(){return e.removeEventListener("scroll",P)}))},g=s([i].concat(n));!(f=g()).done;)d()}),[b,S,P,i,p,m]),B=e.useCallback((function(e,t){r&&e&&e!==t&&(E(),L(),P())}),[E,L,P,r]),j=u(e.useCallback((function(e){var t=b().layer;w((function(t){return o({},t,{layer:e})})),B(t,e)}),[b,w,B])),T=e.useCallback((function(e){var t=function e(t,r){var n=[];if(!t||!r||t===document.body)return n;var o=r.getComputedStyle(t);return[o.overflow,o.overflowX,o.overflowY].some((function(e){return["auto","scroll"].includes(e)}))&&n.push(t),[].concat(n,e(t.parentElement,r))}(e,i),r=t[0];if(r){var n=i.getComputedStyle(r).position;["relative","absolute","fixed"].includes(n)||c||(r.style.position="relative")}return t}),[i,c]),k=u(e.useCallback((function(e){var t=T(e),r=b().trigger;w((function(r){return o({},r,{trigger:e,scrollContainers:t})})),B(r,e)}),[b,w,B,T])),R=null==f||null==f.getParent?void 0:f.getParent();return a((function(){R&&w((function(e){return o({},e,{scrollContainers:T(R)})}))}),[R,w,T]),a((function(){return r&&(O()||L()),function(){O()&&E()}}),[r,O,L,E]),a((function(){r&&P()})),{triggerRef:k,layerRef:j,arrowRef:v,closestScrollContainer:b().scrollContainers[0]||null}}({ResizeObserverPolyfill:w,environment:b,enabled:c,overflowContainer:m,onChange:ne,triggerOption:$}),ie=oe.triggerRef,se=oe.layerRef,ue=oe.arrowRef,ae=oe.closestScrollContainer,ce=function(t){var r=t.isOpen,n=t.onOutsideClick,o=t.onParentClose,i=e.useRef(null),u=e.useRef(null),a=e.useRef(new Set),c=e.useContext(g),l=e.useCallback((function(e){var t=e.target,r=i.current&&i.current.contains(t),n=u.current&&u.current.contains(t),o=function(e,t){for(var r,n=s(e);!(r=n()).done;)if(!(0,r.value.shouldCloseWhenClickedOutside)(t))return!1;return!0}(a.current,e);return n&&o&&a.current.forEach((function(e){return(0,e.closeChild)()})),!r&&!n&&o}),[i,u,a]);return e.useEffect((function(){if("function"==typeof c)return c({shouldCloseWhenClickedOutside:l,closeChild:function(){o&&o()}})}),[c,l,o,a]),e.useEffect((function(){if(r&&n&&"function"!=typeof c)return document.addEventListener("click",e,!0),function(){return document.removeEventListener("click",e,!0)};function e(e){l(e)&&n()}}),[r,n,l,c]),e.useEffect((function(){r||a.current.forEach((function(e){return(0,e.closeChild)()}))}),[r]),{closeOnOutsideClickRefs:{trigger:i,layer:u},registrations:a}}({isOpen:c,onOutsideClick:U,onParentClose:Z}),le=ce.closeOnOutsideClickRefs,fe=ce.registrations;return{triggerProps:Boolean($)?{}:{ref:d(ie,le.trigger,ee)},layerProps:{ref:d(se,le.layer),style:K.styles.layer},arrowProps:{ref:ue,style:K.styles.arrow,layerSide:K.layerSide},layerSide:K.layerSide,triggerBounds:c?$?$.getBounds():null==(n=ee.current)?void 0:n.getBoundingClientRect():null,renderLayer:function(r){return"undefined"!=typeof document?t.createPortal(e.createElement(v,{registrations:fe,children:r}),m||!ae?function(e){var t;if("function"==typeof e){if(!((t=e())&&t instanceof HTMLElement))throw new Error("react-laag: You've passed a function to the 'container' prop, but it returned no valid HTMLElement")}else if(e instanceof HTMLElement)t=e;else if("string"==typeof e){if(!(t=document.getElementById(e)))throw new Error("react-laag: You've passed element with id '"+e+"' to the 'container' prop, but it returned no valid HTMLElement")}else{if(I instanceof HTMLElement)return I;(t=document.getElementById("layers"))||((t=document.createElement("div")).id="layers",t.style.cssText="\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        right: 0px;\n      ",document.body.appendChild(t))}return t}(X):ae):null}}},exports.useMousePositionAsTrigger=function(t){var r=void 0===t?{}:t,n=r.enabled,o=void 0===n||n,i=r.preventDefault,s=void 0===i||i,u=e.useRef(null),a=e.useState(c),l=a[0],f=a[1];return{hasMousePosition:l!==c,resetMousePosition:function(){f(c)},handleMouseEvent:function(e){if(o){s&&e.preventDefault();var t=e.clientX,r=e.clientY;f({top:r,left:t,width:1,height:1,right:t+1,bottom:r+1})}},trigger:{getBounds:function(){return l},getParent:u.current?function(){return u.current}:void 0},parentRef:u}};
//# sourceMappingURL=react-laag.cjs.production.min.js.map
